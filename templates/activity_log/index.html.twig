{% extends 'base.html.twig' %}
{% import 'macros/datatables.html.twig' as dt %}

{% block title %}Activity Logs{% endblock %}

{% block admin_page_title %}Activity Logs{% endblock %}

{% block admin_content %}
{# Logs Table #}
    <table id="activityTable" class="table logs-table">
        <thead>
            <tr>
                <th>User</th>
                <th>Action</th>
                <th>Target</th>
                <th>IP Address</th>
                <th>Date & Time</th>
            </tr>
        </thead>
        <tbody>
        {% for log in logs %}
            <tr>
                <td class="log-username">
                <i class="fas fa-user" style="margin-right:0.25rem;"></i>
                {{ log.username ?? 'N/A' }}</td>
                <td>
                    <span class="action-badge action-{{ log.action|lower }}">
                        {% if log.action == 'Create' %}
                            <i class="fas fa-plus-circle" style="margin-right:0.25rem;"></i>
                        {% elseif log.action == 'Update' %}
                            <i class="fas fa-edit" style="margin-right:0.25rem;"></i>
                        {% elseif log.action == 'Delete' %}
                            <i class="fas fa-trash" style="margin-right:0.25rem;"></i>
                        {% elseif log.action == 'Login' %}
                            <i class="fas fa-sign-in-alt" style="margin-right:0.25rem;"></i>
                        {% elseif log.action == 'Logout' %}
                            <i class="fas fa-sign-out-alt" style="margin-right:0.25rem;"></i>
                        {% endif %}
                        {{ log.action }}
                    </span>
                </td>
                <td>{{ log.targetData }}</td>
                <td class="log-ip">{{ log.ipAddress }}</td>
                <td class="log-date">
                <i class="fas fa-clock" style="margin-right: 0.25rem;"></i>
                {{ log.createdAt|date('M d, Y h:i A') }}</td>
            </tr>
        {% else %}
            <tr>
                <td colspan="7" class="empty-state">
                    <i class="fas fa-clipboard-list" style="font-size: 3rem; color: #e9ecef; margin-bottom: 1rem;"></i>
                    <div>No activity logs found</div>
                </td>
            </tr>
        {% endfor %}
        </tbody>
    </table>

{% block javascripts %}
    {{ parent() }}
   {{ dt.datatable('activityTable', {
    'pageLength': 5,
    'searching': true,
    'dom': "<'row mb-3'<'col-md-6'l><'col-md-6 text-end'f>>" ~ "t" ~ "<'row mt-3'<'col-12'p>>"
}) }}

{% endblock %}
{% endblock %}