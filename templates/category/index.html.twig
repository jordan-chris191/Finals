{% extends 'base.html.twig' %}
{% import 'macros/datatables.html.twig' as dt %}

{% block title %}Category Management{% endblock %}
{% block admin_page_title %}Category Management{% endblock %}

{% block admin_content %}
<div class="search-filter-section mb-4">
    <form method="get" action="{{ path('app_category_index') }}">
        <div class="d-flex align-items-center gap-2 flex-wrap">

            <div class="search-box flex-grow-1" style="min-width: 250px;">
                <i class="fas fa-search"></i>
                <input type="text"
                       name="search"
                       class="form-control"
                       placeholder="Search by category name..."
                       value="{{ app.request.get('search') }}">
            </div>

            <button type="submit" class="btn btn-create">
                <i class="fas fa-filter"></i> Apply Filter
            </button>

            <a class="btn btn-create" href="{{ path('app_category_new') }}">
                <i class="fas fa-plus"></i> Create Category
            </a>
        </div>
    </form>
</div>

<div class="table-container">
<div data-turbo="false">
    <table id="categoryTable" class="table table-striped table-hover align-middle">
        <thead class="table-dark">
            <tr>
                <th>Id</th>
                <th>Name</th>
                <th>Created</th>
                <th class="text-center">Actions</th>
            </tr>
        </thead>
        <tbody>
            {% for category in categories %}
                <tr>
                    <td>{{ category.id }}</td>
                    <td>{{ category.name }}</td>
                    <td>{{ category.createdAt ? category.createdAt|date('Y-m-d H:i') : '-' }}</td>
                    <td class="text-center">
                        <a class="btn btn-action btn-view" href="{{ path('app_category_show', {'id': category.id}) }}">
                            <i class="fas fa-eye"></i>
                        </a>
                        <a class="btn btn-action btn-edit" href="{{ path('app_category_edit', {'id': category.id}) }}">
                            <i class="fas fa-edit"></i>
                        </a>
                    </td>
                </tr>
            {% else %}
                <tr>
                    <td colspan="4" class="text-center text-muted">No categories found</td>
                </tr>
            {% endfor %}
        </tbody>
    </table>
</div>
</div>

{% block javascripts %}
    {{ parent() }}
    {{ dt.datatable('categoryTable', {'pageLength': 10, 'searching': false}) }}
{% endblock %}
{% endblock %}
