{% extends 'base.html.twig' %}

{% block title %}Product Management{% endblock %}

{% block admin_page_title %}Product Management{% endblock %}

{% block admin_content %}
<div class="page-actions d-flex justify-content-between align-items-center mb-4">
    <div class="product-filter">
        <form method="get" action="{{ path('app_product_index') }}" class="row g-2 align-items-center">
            <div class="col-auto">
                <input type="text" name="search" class="form-control" placeholder="Search by name" value="{{ app.request.get('search') }}">
            </div>
            <div class="col-auto">
                <input type="number" step="0.01" name="min_price" class="form-control" placeholder="Min Price" value="{{ app.request.get('min_price') }}">
            </div>
            <div class="col-auto">
                <input type="number" step="0.01" name="max_price" class="form-control" placeholder="Max Price" value="{{ app.request.get('max_price') }}">
            </div>
            <div class="col-auto">
                <button type="submit" class="btn btn-create"><i class="fas fa-filter"></i> Filter</button>
            </div>
            <div class="col-auto">
                <a href="{{ path('app_product_index') }}" class="btn btn-secondary"><i class="fas fa-times"></i> Clear</a>
            </div>
        </form>
    </div>
    <a class="btn btn-create" href="{{ path('app_product_new') }}">
        <i class="fas fa-plus"></i> Add New Product
    </a>
</div>



{% if products is not empty %}
<div class="row g-4">
    {% for product in products %}
    <div class="col-12 col-sm-6 col-lg-4 col-xl-3">
        <div class="product-card">
            <div class="product-image">
                {% if product.image %}
                    <img src="{{ asset('uploads/products/' ~ product.image) }}" alt="{{ product.name }}">
                {% else %}
                    <i class="fas fa-utensils"></i>
                {% endif %}
            </div>
            <div class="product-body">
                <div class="product-name">{{ product.name }}</div>
                <div class="product-description">{{ product.description }}</div>
                <div class="product-price">${{ product.price|number_format(2, '.', ',') }}</div>
                
                <div class="product-meta">
                    <div><small>Added: {{ product.createdAt ? product.createdAt|date('M d, Y') : '-' }}</small></div>
                    {% if product.updatedAt %}
                    <div><small>Updated: {{ product.updatedAt|date('M d, Y') }}</small></div>
                    {% endif %}
                </div>
                
                <div class="product-actions">
                    <a href="{{ path('app_product_show', {'id': product.id}) }}" class="btn-action btn-view">
                        <i class="fas fa-eye"></i> View
                    </a>
                    <a href="{{ path('app_product_edit', {'id': product.id}) }}" class="btn-action btn-edit">
                        <i class="fas fa-edit"></i> Edit
                    </a>
                </div>
            </div>
        </div>
    </div>
    {% endfor %}
</div>
{% else %}
<div class="empty-state">
    <i class="fas fa-utensils"></i>
    <h5>No products found</h5>
    <p>Start by adding your first product to the menu</p>
    <a class="btn btn-create mt-3" href="{{ path('app_product_new') }}">
        <i class="fas fa-plus"></i> Add First Product
    </a>
</div>
{% endif %}
{% endblock %}